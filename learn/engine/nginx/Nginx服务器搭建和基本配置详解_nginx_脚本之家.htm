<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="gb2312" />
<meta name="applicable-device" content="pc">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta http-equiv="Cache-Control" content="no-transform" />
<title>Nginx服务器搭建和基本配置详解_nginx_脚本之家</title>
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
<meta name="keywords" content="Nginx" />
<meta name="description" content="这篇文章主要介绍了Nginx服务器搭建和基本配置详解,Nginx是事件驱动的高性能服务器,需要的朋友可以参考下" />
<link rel="alternate" media="only screen and(max-width: 640px)" href="http://m.jb51.net/article/72527.htm" />
<meta http-equiv="mobile-agent" content="format=html5; url=http://m.jb51.net/article/72527.htm" />
<meta http-equiv="mobile-agent" content="format=xhtml; url=http://m.jb51.net/article/72527.htm" />
<script type="text/javascript">
var tougao="goldensun";var lmname="服务器";var ourl="";
(function(){var reWriteUrl=function(url){if(url){var Splits=url.split("/"),siteName=window.location.pathname;if(typeof siteName!=="undefined"){return "http://m.jb51.net"+siteName}}};if(/Android|webOS|iPhone|iPad|Windows Phone|iPod|BlackBerry|SymbianOS|Nokia|Mobile/i.test(navigator.userAgent)){var url=window.location.href;var pathname=window.location.pathname;if(url.indexOf("?pc")<0){try{window.location.href=reWriteUrl(url)}catch(e){}}}})();
</script>
<link type="text/css" href="http://img.jb51.net/skin/2016/base.css" rel="stylesheet" />
<link type="text/css" href="http://img.jb51.net/skin/2016/common.css" rel="stylesheet" />
<script type="text/javascript" src="http://img.jb51.net/jslib/jquery/jquery.min.js"></script>
<script type=text/javascript src="http://img.jb51.net/js/base.js"></script>
</head>
<body>
<!--head Star -->
<div id="head">
  <div class="toolBar">
  <div class="main">
    <!--topNav Star -->
    <div class="topNav clearfix">
      <ul class="navList fl">
        <li>
          <div class="one"><a href="http://www.jb51.net" target="_blank">脚本之家</a></div>
        </li>
        <li>
          <div class="one"><a href="http://www.jb51.net/softs/" target="_blank">软件下载<i class="icon"></i></a></div>
          <div class="two">
<a href="/softs/android.html" target="_blank">android软件</a> <a href="/softs/mac.html" target="_blank">MAC软件</a> <a href="/qudong/" target="_blank">驱动下载</a> <a href="/fonts/" target="_blank">字体下载</a> <a href="/dll/" target="_blank">DLL下载</a> </div>
</li>
        <li>
          <div class="one"><a href="/codes/" target="_blank">源码下载<i class="icon"></i></a></div>
          <div class="two"> <a href="/codes/asp.html" target="_blank">asp源码</a> <a href="/codes/php.html" target="_blank">php源码</a> <a href="/codes/aspnet.html" target="_blank">asp.net源码</a> <a href="/codes/jsp.html" target="_blank">jsp源码</a> <a href="/codes/editor.html" target="_blank">网页编辑器</a> <a href="/codes/list123_1.html" target="_blank">数据库管理</a> <a href="/codes/list124_1.html" target="_blank">常用组件</a> <a href="/jiaoben/" target="_blank">脚本下载</a></div>
        </li>
        <li>
          <div class="one"><a href="http://tools.jb51.net" target="_blank">在线工具<i class="icon"></i></a></div>
          <div class="two"> <a href="/shouce/" target="_blank">在线手册</a> <a href="/tools/cssyasuo.shtml" target="_blank">CSS格式化</a> <a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JS格式化</a> <a href="/tools/html-js.htm" target="_blank">Html转化为Js</a> <a href="http://tools.jb51.net/regex/javascript" target="_blank">js正则表达式</a>
</div>
        </li>
        <li>
          <div class="one"><a href="/w3school/" target="_blank">网页教程基础</a></div>
        </li>
			<li>
          <div class="one"><a href="http://s.jb51.net" target="_blank">服务器常用软件</a></div>
        </li>
		<li>
          <div class="one"><a href="http://m.jb51.net" target="_blank">手机版</a></div>
          <div class="two"><img src="http://files.jb51.net/images/m.jb51.net.png" data-baiduimageplus-ignore /></div>     
        </li>
        <li class="watch">
          <div class="one"><a href="http://weibo.com/jb51net" target="_blank" rel="nofollow" ><i class="icon"></i>关注微信</a></div>
          <div class="two"><img src="http://files.jb51.net/images/weixin_200.gif" data-baiduimageplus-ignore /></div>
        </li>
      </ul>
      <div class="navUser mt5 fr" id="jb51_topbar" > </div>
    </div>
    <!--topNav End -->
  </div>
</div>

  <div class="main clearfix">
    <div class="mtb10 clearfix">
      <div class="logo"><a href="http://www.jb51.net/"><img src="http://www.jb51.net/images/logo.gif" title="脚本之家" alt="脚本之家" /></a></div>
      <div class="logom fl"><span id="logo_m" class="jbTestPos"></span></div>
      <div class="logor fr"><span id="logo_r" class="jbTestPos"></span></div>
    </div>
<!-- 导航-->
<DIV class="nav_top clearfix">
<UL>
<li><a href="http://www.jb51.net/web/">网页制作</a></li>
<li><a href="http://www.jb51.net/list/index_1.htm">网络编程</a></li>
<li><a href="http://www.jb51.net/list/index_96.htm">脚本专栏</a></li>
<li><a href="http://www.jb51.net/jiaoben/">脚本下载</a></li>
<li><a href="http://www.jb51.net/list/index_104.htm">数据库</a></li>
<li><a href="http://www.jb51.net/cms/">CMS教程</a></li>
<li><a href="http://www.jb51.net/books/">电子书籍</a></li>
<li><a href="http://www.jb51.net/pingmian/">平面设计</a></li>
<li><a href="http://www.jb51.net/media/">媒体动画</a></li>
<li><a href="http://www.jb51.net/os/">操作系统</a></li>
<li><a href="http://www.jb51.net/yunying/">网站运营</a></li>
<li><a href="http://www.jb51.net/hack/">网络安全</a></li>
<li class="last"><a href="http://www.jb51.net/shouce/">在线手册</a></li>

</UL>
</DIV>

<!--导航结束-->
<div class="subnav clearfix">
<ul><li><a href='/list/list_192_1.htm' title="星外虚拟主机">星外虚拟主机</a></li>
<li><a href='/list/list_193_1.htm' title="华众虚拟主机">华众虚拟主机</a></li>
<li><a href='/list/list_203_1.htm' title="Linux/apache">Linux/apache</a></li>
<li><a href='/list/list_204_1.htm' title="win服务器">win服务器</a></li>
<li><a href='/list/list_218_1.htm' title="FTP服务器">FTP服务器</a></li>
<li><a href='/list/list_219_1.htm' title="DNS服务器">DNS服务器</a></li>
<li><a href='/list/list_223_1.htm' title="Tomcat ">Tomcat </a></li>
<li><a href='/list/list_226_1.htm' title="nginx">nginx</a></li>
<li><a href='/list/list_247_1.htm' title="zabbix">zabbix</a></li>
<li><a href='/list/list_220_1.htm' title="服务器其它">服务器其它</a></li>
</ul>
</div>
<div class="NavBar clearfix ptb10">
<div class="fl w690">
<div class="box mb15 mt10"><i class="icon"></i>您的位置：<a href='/'>首页</a> → <a href="/list/index_27.htm" title="网站技巧">网站技巧</a> → <a href="/list/list_82_1.htm" title="服务器">服务器</a> → <a href="/list/list_226_1.htm" title="nginx">nginx</a> → 正文内容 Nginx搭建</div>
</div>
<div class="fr w300"><div class="search">
<form action="http://so.jb51.net/cse/search" target="_blank">
    <input type="hidden" name="s" value="10520733385329581432">
    <input type="hidden" name="ie" value="gbk">
    <input type="text" name="q" class="key_input" placeholder="请输入关键词">
    <input type="submit" value="搜索" class="c_btn">
</form></div></div>
  </div>
</div>
<!--head End -->
<div class="main mb10 clearfix">
<div class="clearfix"><span id="tonglan1" class="jbTestPos"></span></div>
</div>

<!--content Star -->
<div id="contents">
 <div class="main clearfix">
      <div class="w690 fl">
      <div class="article-content border">
      <div class="title">
            <h1 class="YaHei">Nginx服务器搭建和基本配置详解</h1>
            <p>投稿：goldensun  字体：[<a href="javascript:turnbig()">增加</a> <a href="javascript:turnsmall()">减小</a>] 类型：转载 时间：2015-09-21<a href="#comments"> 我要评论</a></p>
        </div>
        <div class="art_desc mt10"><div id="art_demo">这篇文章主要介绍了Nginx服务器搭建和基本配置详解,Nginx是事件驱动的高性能服务器,需要的朋友可以参考下</div></div>
        <div class="lbd clearfix"><span id="art_up" class="jbTestPos"></span></div>
        <div id="content">
<p>Nginx(engine X) 是一个高性能的 HTTP 服务器和反向代理服务器，这款软件开发的目的是为了解决 C10k 问题。</p>
<p>Nginx 的架构利用了许多现代操作系统的特性，以实现一个高性能的 HTTP 服务器。例如在 Linux 系统上，Nginx 使用了 epoll，sendfile，File AIO，DIRECTIO 等机制，使得 Nginx 不仅性能高效，而且资源占用率非常低，官方宣称 nginx 维持 10000 个非活动的 HTTP keep-alive 连接仅需要 2.5M 内存。<br />
<img src="http://files.jb51.net/file_images/article/201509/2015921180855666.png&#63;20158211895" alt="" /><br />
Nginx会按需同时运行多个进程：一个主进程（master）和几个工作进程（worker），配置了缓存时还会有缓存加载器进程（cache loader）和缓存管理器进程（cache manager）等。所有进程均是仅含有一个线程，并主要通过“共享内存”的机制实现进程间通信。主进程以 root 用户身份运行，而worker、cache loader 和 cache manager 均应以非特权用户身份运行。</p>
<p><strong>1. 安装 nginx</strong><br />
在 CentOS6 版本的 EPEL 源中，已经加入了 nginx 的 rpm 包，不过此 RPM 包版本较低。如果需要更新版本，可以使用官方制作的 rpm 包，或者使用源码包编译安装。</p>
<p>还可以使用一些二次开发功能增强的 nginx 版本，例如淘宝的 Tengine 和 OpenResty 都是不错的选择。</p>
<p><strong>1.1 常用编译参数</strong></p>
<p>--prefix=PATH：指定 nginx 的安装目录<br />
--conf-path=PATH：指定 nginx.conf 配置文件路径<br />
--user=NAME：nginx 工作进程的用户<br />
--with-pcre：开启 PCRE 正则表达式的支持<br />
--with-http_ssl_module：启动 SSL 的支持<br />
--with-http_stub_status_module：用于监控 Nginx 的状态<br />
--with-http-realip_module：允许改变客户端请求头中客户端 IP 地址<br />
--with-file-aio：启用 File AIO<br />
--add-module=PATH：添加第三方外部模块<br />
这里提供一个完整的编译方案：</p>
<p>--prefix=/usr/local/nginx \<br />
--conf-path=/etc/nginx/nginx.conf \<br />
--error-log-path=/var/log/nginx/error.log \<br />
--http-log-path=/var/log/nginx/access.log \<br />
--http-client-body-temp-path=/var/tmp/nginx/client_body \<br />
--http-proxy-temp-path=/var/tmp/nginx/proxy \<br />
--http-fastcgi-temp-path=/var/tmp/nginx/fastcgi \<br />
--http-uwsgi-temp-path=/var/tmp/nginx/uwsgi \<br />
--pid-path=/var/run/nginx.pid \<br />
--lock-path=/var/lock/nginx \<br />
--user=nginx \<br />
--group=nginx \<br />
--with-file-aio \<br />
--with-http_ssl_module \<br />
--with-http_realip_module \<br />
--with-http_sub_module \<br />
--with-http_gzip_static_module \<br />
--with-http_stub_status_module \<br />
--with-pcre<br />
<strong>1.2 nginx 的启动和关闭</strong></p>
<p>启动 nginx：</p>
<div class="jb51code">
<pre class="brush:bash;">
# nginx -c /etc/nginx/nginx.conf </pre>
</div>
<p><br />
关闭 nginx</p>
<div class="jb51code">
<pre class="brush:bash;">
# nginx -s stop</pre>
</div>
<p><br />
重读配置文件</p>
<div class="jb51code">
<pre class="brush:bash;">
# nginx -s reload
# pkill -HUP nginx</pre>
</div>
<p><br />
重新打开日志文件</p>
<div class="jb51code">
<pre class="brush:bash;">
# nginx -s reopen
# pkill -USR1 nginx</pre>
</div>
<p><br />
还可以下载 nginx RPM 包中的 /etc/init.d/nginx 文件，修改路径后即可使用：</p>
<div class="jb51code">
<pre class="brush:bash;">
# service nginx {start|stop|status|restart|reload|configtest|}</pre>
</div>
<p><br />
<strong>2. nginx.conf 配置文件</strong></p>
<p>Nginx 配置文件主要分成四部分：main（全局设置）、http（HTTP 的通用设置）、server（虚拟主机设置）、location（匹配 URL 路径）。还有一些其他的配置段，如 event，upstream 等。</p>
<p><strong>2.1 通用设置</strong></p>
<p>user nginx<br />
指定运行 nginx workre 进程的用户和组</p>
<p>worker_rlimit_nofile #<br />
指定所有 worker 进程能够打开的最大文件数</p>
<p>worker_cpu_affinity<br />
设置 worker 进程的 CPU 粘性，以避免进程在 CPU 间切换带来的性能消耗。如 worker_cpu_affinity 0001 0010 0100 1000;（四核）</p>
<p>worker_processes 4<br />
worker 工作进程的个数，这个值可以设置为与 CPU 数量相同，如果开启了 SSL 和 Gzip，那么可以适当增加此数值</p>
<p>worker_connections 1000<br />
单个 worker 进程能接受的最大并发连接数，放在 event 段中</p>
<p>error_log logs/error.log info<br />
错误日志的存放路径和记录级别</p>
<p>use epoll<br />
使用 epoll 事件模型，放在 event 段中</p>
<p><strong>2.2 http 服务器</strong></p>
<p>server {}：<br />
定义一个虚拟主机</p>
<p>listen 80;<br />
定义监听的地址和端口，默认监听在本机所有地址上</p>
<p>server_name NAME [...];<br />
定义虚拟主机名，可以使用多个名称，还可以使用正则表达式或通配符。</p>
<p>sendfile on<br />
开启 sendfile 调用来快速的响应客户端</p>
<p>keepalive_timeout 65<br />
长连接超时时间，单位是秒。</p>
<p>send_timeout<br />
指定响应客户端的超时时间</p>
<p>client_max_body_size 10m<br />
允许客户端请求的实体最大大小</p>
<p>root PATH<br />
设置请求 URL 所对应资源所在文件系统上的根目录</p>
<p>location [ = | ~ | ~* | ^~ ] URI { ... }<br />
设置一个 URI 匹配路径<br />
=：精确匹配<br />
~：正则表达式匹配，区分字符大小写<br />
~*：正则表达式匹配，不区分字符大小写<br />
^~：URI 的前半部分匹配，且不实用正则表达式<br />
优先级：<br />
= &gt; location 完整路径 &gt; ^~ &gt; ~ &gt; ~* &gt; location 起始路径 &gt; location /</p>
<p>allow 和 deny<br />
基于 IP 访问控制，如：</p>
<p>仅允许 192.168.0.0/24 网段客户端访问</p>
<p>allow 192.168.0.0/24;<br />
deny all;<br />
stub_status on<br />
开启状态显式，仅能用于 location 中：<br />
开启状态显式页面</p>
<div class="jb51code">
<pre class="brush:plain;">
location /status {
stub_status on;
allow 172.16.0.0/16;
deny all;
}</pre>
</div>
<p><br />
rewrite &lt;REGEX&gt; &lt;REPL&gt; &lt;FLAG&gt;<br />
URL 重写，可以使用多种标记<br />
例如：</p>
<p>rewrite ^/images/(.*\.jpg)$ /imgs/$1 break;<br />
可用的 flag：<br />
- last：重写完成后，继续匹配其他 rewrite 规则<br />
- break：重写完成后不再继续匹配<br />
- redirect：返回 302 重定向（临时重定向），客户端对重定向的 URL 发起新的请求<br />
- permanent：返回 301 重定向（永久重定向），客户端对重定向的 URL 发起新的请求</p>
<p>一个 server 配置示例：</p>
<div class="jb51code">
<pre class="brush:plain;">
server {
 listen  80;
 server_name www.example.com;
 root /web/htdocs;

 location / {
  index index.html index.htm;
 }

 location /status {
  stub_status on;
  allow 10.0.0.0/8;
  deny all;
  access_log off;
}

</pre>
</div>
<p><strong>2.3 SSL 的配置</strong></p>
<p>启用一个 SSL 虚拟主机</p>
<div class="jb51code">
<pre class="brush:plain;">
server {
  listen 443;
  server_name example.com;

  root /apps/www;
  index index.html index.htm;

  ssl on;
  ssl_certificate /etc/nginx/ssl/nginx.crt;
  ssl_certificate_key /etc/nginx/ssl/nginx.key;

#  ssl_protocols SSLv3 TLSv1 TLSv1.1 TLSv1.2;
#  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;
#  ssl_prefer_server_ciphers on;

}

</pre>
</div>
<p>其中 ssl_certificate 表示 CA 文件，ssl_certificate_key 表示密钥文件。</p>
<p>如果想把 http 请求强制转到 https，可以这样：</p>
<div class="jb51code">
<pre class="brush:plain;">
server {
listen  80;
server_name example.me;

return 301 https://$server_name$request_uri;
}
</pre>
</div>
<p><br />
<strong>2.4 nginx 做负载均衡反向代理</strong></p>
<p>nginx 做反向代理时，后端主机有多台，可以使用 upstream 定义一个后端主机池，在反向代理时直接使用主机池的名字。在 upstream 中可以定义负载均衡调度算法，权重，健康状态检测等参数。</p>
<p>例如：</p>
<div class="jb51code">
<pre class="brush:plain;">
upstream backend {
 server 172.16.0.1:80 weight=1 max-fails=3 fail_timeout=10;
 server 172.16.0.2:80 weight=1max-fails=3 fail_timeout=10;;
}</pre>
</div>
<p><br />
默认请求下，使用 round-robin 调度算法，并有健康状态检查和恢复主机的能力。</p>
<p>ningx 还可以使用这些算法：</p>
<p>ip_hash：基于源地址哈希，主要目的是会话保持<br />
least_conn：基于最少活动连接进行调度<br />
sticky：基于 cookie 进行会话绑定，nginx 会在客户端第一次访问时插入路由信息到 cookie 中，或者选择 cookie 中的某个字段的值作为键，以后每次请求将基于此信息进行调度<br />
基于 cookie 的会话绑定共有 cookie，route 和 learn 三种。</p>
<p>例如，基于 cookie name 的调度：</p>
<div class="jb51code">
<pre class="brush:plain;">
upstream backend {
 server backend1.example.com;
 server backend2.example.com;

 sticky cookie srv_id expires=1h domain=.example.com path=/;
}
</pre>
</div>
<p><br />
使用此主机组进行反向代理：</p>
<div class="jb51code">
<pre class="brush:plain;">
location / {
 proxy_pass http://backend;
 proxy_set_header Host $host;
 proxy_set_haeder X-Forwared-For $proxy_add_x_forwarded_for;
}</pre>
</div>
<p><br />
proxy_pass URL 指定代理的后端主机，可以指定 "http" 或 "https" 协议，域名可以是 ip 地址，也可以是 upstream 池名字</p>
<p>如果代理指定的是一个 URI 地址，如 http://127.0.0.1/remote，那么将直接被代理至指定 URI，无论请求的 URI 是什么<br />
如果代理指定的一个主机而没有 URI，如 http://127.0.0.1，客户端请求的URI将被传递至指定域名<br />
如果 location 中使用模式匹配 url，那么 url 也会被传递至代理 URL 的末端<br />
如果 location 中使用了 URI 重写，那么 proxy_pass 会使用重写后的结果进行处理<br />
proxy_set_header HEADER VALUE 对转发的报文首部进行修改</p>
<p><strong>2.5 反向代理时的缓存相关设定</strong></p>
<p>proxy_cache_path PATH [levels=levels] keys_zone=NAME:SIZE</p>
<p>定义磁盘缓存路径，nignx 的缓存是以键值方式存放的，keys_zone 用于指定键存放的内存空间名字和大小，对应的值则存放在 PATH 指定的路径中。levels 可以指定缓存存放路径的级数和名称字符数。此设置只能在 http 段中定义。</p>
<p>如：</p>
<div class="jb51code">
<pre class="brush:plain;">
proxy_cache_path /var/cache/nginx/proxy levels=1:2 keys_zone=one:10m;</pre>
</div>
<p><br />
proxy_cache_valid [code ...] time 指定不同响应码的内容的缓存时间</p>
<p>如：</p>
<div class="jb51code">
<pre class="brush:plain;">
proxy_cache_valid 200 302 10m;
proxy_cache_valid 404  1m;
proxy_cache_valid any  1m;</pre>
</div>
<p><br />
proxy_cache_method METHOD 定义哪些方法的请求结果可以被缓存，如：</p>
<div class="jb51code">
<pre class="brush:plain;">
proxy_cache_method GET;
proxy_cache_method HEAD;</pre>
</div>
<p><br />
proxy_cache NAME 指定使用预先定义的缓存空间用于缓存</p>
<p>2.6 fastCGI 代理的设置</p>
<p>使用 fastCGI 时，设置代理的方法同 porxy_pass 类似，同时还可以使用 fastCGI 缓存，设置的方法也和 proxy_cache 类似。</p>
<div class="jb51code">
<pre class="brush:plain;">
location ~ \.php$ {
 root   /web/htdocs;
 fastcgi_pass 127.0.0.1:9000;
 fastcgi_index index.php;
 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
 include  fastcgi_params;
}</pre>
</div>
<p><br />
3. 一些常用内置变量</p>
<p>$arg_name：请求 uri 中的 name 参数至<br />
$args：请求 uri 的所有参数，和 $query_string 相同<br />
$uri：当前请求的 uri，不带参数<br />
$request_uri：请求的 uri，带完整参数<br />
$host：http 请求报文中 host 首部，如果没有 host 首部，则以处理此请求的虚拟主机的主机名替代<br />
$hostname：nginx 服务运行在主机的主机名<br />
$remote_addr：客户端 IP<br />
$remote_port：客户端 port<br />
$remote_user：使用用户认证时客户端用户输入的用户名<br />
$request_filename：用户请求中的 URI 经过本地 root&nbsp; 或 alias 转换后映射的本地的文件路径<br />
$request_method：请求方法<br />
$server_addr：服务器地址<br />
$server_name：服务器名称<br />
$server_port：服务器端口<br />
$server_protocol：服务器向客户端发送响应时的协议，如 http/1.1，http/1.0<br />
$scheme：在请求中使用的 scheme，如 https://www.magedu.com/ 中的 https<br />
$http_name：匹配请求报文中的指定 HEADER，如 $http_host 匹配请求报文中的 host 首部<br />
$sent_http_name：匹配响应报文中指定的 HEADER，例如 $sent_content_type 匹配响应报文中的 content-type 首部<br />
$status：响应状态</p>

</div><!--endmain-->
<div class="art_xg">
<h4>您可能感兴趣的文章:</h4><ul><li><a href="/article/16729.htm" title="Nginx虚拟主机多server_name的顺序问题" target="_blank">Nginx虚拟主机多server_name的顺序问题</a></li><li><a href="/article/18209.htm" title="Linux+Nginx+Php架设高性能WEB服务器" target="_blank">Linux+Nginx+Php架设高性能WEB服务器</a></li><li><a href="/article/20456.htm" title="Nginx 安装笔记(含PHP支持、虚拟主机、反向代理负载均衡)" target="_blank">Nginx 安装笔记(含PHP支持、虚拟主机、反向代理负载均衡)</a></li></ul>
</div>
<div class="lbd clearfix">
<span id="art_down" class="jbTestPos"></span>
</div>
<div id="shoucang"></div>
<div class="tags mt10">
<strong>Tags：</strong><a href="http://img.jb51.net/tag/Nginx/1.htm" target="_blank" title="搜索关于Nginx的文章">Nginx</a> 
</div>
<DIV class="relatedarticle clearfix mt5">
<H2>相关文章</H2>
<ul><li><span>2015-06-06</span><a href="/article/68503.htm" title="对Nginx支持SSL的性能进行优化的方法" target="_blank">对Nginx支持SSL的性能进行优化的方法</a></li><li><span>2014-01-01</span><a href="/article/45643.htm" title="Nginx限制IP并发数与下载速度的方法" target="_blank">Nginx限制IP并发数与下载速度的方法</a></li><li><span>2014-07-07</span><a href="/article/52569.htm" title="Nginx限制搜索引擎爬虫频率、禁止屏蔽网络爬虫配置示例" target="_blank">Nginx限制搜索引擎爬虫频率、禁止屏蔽网络爬虫配置示例</a></li><li><span>2016-01-01</span><a href="/article/77593.htm" title="浅析Nginx配置文件中的变量的编写使用" target="_blank">浅析Nginx配置文件中的变量的编写使用</a></li><li><span>2015-12-12</span><a href="/article/77262.htm" title="在Nginx中配置image filter模块来实现动态生成缩略图" target="_blank">在Nginx中配置image filter模块来实现动态生成缩略图</a></li><li><span>2015-03-03</span><a href="/article/62880.htm" title="Nginx带宽控制（限速模块使用）" target="_blank">Nginx带宽控制（限速模块使用）</a></li><li><span>2015-07-07</span><a href="/article/69217.htm" title="Nginx设置静态页面压缩和缓存过期时间的方法" target="_blank">Nginx设置静态页面压缩和缓存过期时间的方法</a></li><li><span>2014-01-01</span><a href="/article/45661.htm" title="重启nginx后丢失nginx.pid的解决方法" target="_blank">重启nginx后丢失nginx.pid的解决方法</a></li><li><span>2015-07-07</span><a href="/article/68792.htm" title="Ubuntu下Nginx配置ThinkPHP的Pathinfo和URl Rewrite模式" target="_blank">Ubuntu下Nginx配置ThinkPHP的Pathinfo和URl Rewrite模式</a></li><li><span>2015-12-12</span><a href="/article/77043.htm" title="在Nginx服务器上屏蔽IP的一些基本配置方法分享" target="_blank">在Nginx服务器上屏蔽IP的一些基本配置方法分享</a></li></ul>
</DIV>
<div class="lbd clearfix mt5">
<span id="art_down2" class="jbTestPos"></span>
</div>
<a href="#comments"></a>
<div id="comments">
<H2>最新评论</H2>
<div class="pd5"><div id="SOHUCS" sid="art_72527"></div></div>
</div>
      </div><!--endborder-->
      </div><!--end fl-->
      
<div class="w300 fr">
<div class="r300 clearfix"><span id="side_up" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">大家感兴趣的内容</H4>
<UL class="newsList newList-in">
<li><EM class="no1">1</EM><a href="/article/27533.htm" title="nginx 多站点配置方法集合" target="_blank">nginx 多站点配置方法集合</a></li><li><EM class="no2">2</EM><a href="/article/35675.htm" title="nginx提示：500 Internal Server Error错误的解决方法" target="_blank">nginx提示：500 Internal Server</a></li><li><EM class="no3">3</EM><a href="/article/23902.htm" title="Windows下Nginx+PHP5的安装与配置方法" target="_blank">Windows下Nginx+PHP5的安装与配置</a></li><li><EM class="no4">4</EM><a href="/article/25643.htm" title="nginx 作为反向代理实现负载均衡的例子" target="_blank">nginx 作为反向代理实现负载均衡</a></li><li><EM class="no5">5</EM><a href="/article/47632.htm" title="Nginx 403 forbidden的解决办法" target="_blank">Nginx 403 forbidden的解决办法</a></li><li><EM class="no6">6</EM><a href="/article/47916.htm" title="nginx FastCGI错误Primary script unknown解决办法" target="_blank">nginx FastCGI错误Primary scrip</a></li><li><EM class="no7">7</EM><a href="/article/22552.htm" title="一句简单命令重启nginx" target="_blank">一句简单命令重启nginx</a></li><li><EM class="no8">8</EM><a href="/article/54190.htm" title="权限问题导致Nginx 403 Forbidden错误的解决方法" target="_blank">权限问题导致Nginx 403 Forbidde</a></li><li><EM class="no9">9</EM><a href="/article/24598.htm" title="Nginx下301重定向域名的方法小结" target="_blank">Nginx下301重定向域名的方法小结</a></li><li><EM class="no10">10</EM><a href="/article/50899.htm" title="Nginx伪静态配置和常用Rewrite伪静态规则集锦" target="_blank">Nginx伪静态配置和常用Rewrite伪</a></li>
</UL>
</DIV>
</DIV>
<div class="r300 clearfix mt10"><span id="idctu" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">最近更新的内容</H4>
<UL class="newsListA">
<ul><li><a href="/article/59021.htm" title="Nginx(Tengine)启用 SPDY 支持的配置方法" target="_blank">Nginx(Tengine)启用 SPDY 支持的配置方法</a></li><li><a href="/article/52056.htm" title="nginx中文件下载指定保存文件名的配置方法" target="_blank">nginx中文件下载指定保存文件名的配置方法</a></li><li><a href="/article/77364.htm" title="Nginx服务器下配置个性二级域名及多个域名的实例讲解" target="_blank">Nginx服务器下配置个性二级域名及多个域名</a></li><li><a href="/article/24685.htm" title="Nginx 禁止访问某个目录或文件的设置方法" target="_blank">Nginx 禁止访问某个目录或文件的设置方法</a></li><li><a href="/article/78017.htm" title="WordPress与Drupal的Nginx配置rewrite重写规则示例" target="_blank">WordPress与Drupal的Nginx配置rewrite重写</a></li><li><a href="/article/78776.htm" title="详解Nginx服务器中map模块的配置与使用" target="_blank">详解Nginx服务器中map模块的配置与使用</a></li><li><a href="/article/20456.htm" title="Nginx 安装笔记(含PHP支持、虚拟主机、反向代理负载均衡)" target="_blank">Nginx 安装笔记(含PHP支持、虚拟主机、反</a></li><li><a href="/article/47189.htm" title="linux下为nginx添加jvmroute模块的方法" target="_blank">linux下为nginx添加jvmroute模块的方法</a></li><li><a href="/article/32211.htm" title="nginx,apache的alias和认证功能" target="_blank">nginx,apache的alias和认证功能</a></li><li><a href="/article/78289.htm" title="Nginx服务器中强制使用缓存的配置及缓存优先级的讲解" target="_blank">Nginx服务器中强制使用缓存的配置及缓存优</a></li></ul>
</UL>
</DIV>
</DIV>   
<div class="r300 clearfix mt10"><span id="idctu1" class="jbTestPos"></span></div>
<DIV class="tabTitleBar mt10 bgf borderTblue">
<DIV class="borderTnone pb10 YaHei">
<H4 class="blue">常用在线小工具</H4>
<ul class="newsListA"><span id="bctools" class="jbTestPos"></span></ul>
</DIV>
</DIV>
<div class="r300 clearfix mt10" id="idctu2"><span id="idctu2" class="jbTestPos"></span></div>
<div class="mt10 rFixedBox">
<span id="r_2" class="jbTestPos"></span>
</div>
      
      
      </div><!--end fr-->
      </div>
</div><!--end content-->
<div id="footer">
<div class="main clearfix">
<p>
<a href="http://www.jb51.net/about.htm" target="_blank">关于我们</a> - 
<a href="http://www.jb51.net/support.htm" target="_blank">广告合作</a> - 
<a href="http://www.jb51.net/linkus.htm" target="_blank">联系我们</a> -  
<a href="http://www.jb51.net/sm.htm" target="_blank">免责声明</a> -  
<a href="http://www.jb51.net/sitemap.htm" target="_blank">网站地图</a> - 
<a href="tencent://message/?uin=461478385&Site=http://www.jb51.net" target="_blank">投诉建议</a> - 
<a href="http://www.jb51.net/up.htm" target="_blank">在线投稿</a>
</p>
<p>&copy;CopyRight 2006-2016 JB51.Net Inc All Rights Reserved. 脚本之家 版权所有</p>
</div>
</div><!--end footer-->
<link type="text/css" rel="stylesheet" href="/jslib/syntaxhighlighter/styles/shCore.css" />
<link type="text/css" rel="Stylesheet" href="/jslib/syntaxhighlighter/styles/shThemeDefault.css" />
<script type="text/javascript" src="/jslib/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="/jslib/syntaxhighlighter/scripts/shAutoloader.js"></script>
<script type="text/javascript"> 
if (top.location != self.location)top.location=self.location;
$('#content').find('img').each(function(){
        var img = this;
        if (img.width >= 650){
            img.style.width = "650px";
            img.style.height = "auto";
            //$(img).removeAttr('height');
            var aTag = document.createElement('a');
            aTag.href = img.src;
			aTag.target="_blank";
            $(aTag).addClass('bPic')
            .insertAfter(img).append(img)
          }
    });
 $(window).scroll(function()
    {	
    	//rFixedBox跟随滚动
    	var h = $(window).height();
        var top = $(window).scrollTop();
    	var rFixedBox = $('.rFixedBox').prev().offset();
        var fixedTop = rFixedBox.top;
		
        if(top>=fixedTop+344)
        {
			var h1 = parseInt($('#content').children('.main').height());
			if(parseInt(top) + 340 < h1){
				$('.rFixedBox').css({'position':'fixed','top': 0});
			}else{
				$('.rFixedBox').css({'position':'absolute','top': h1-510});
			}
        }
        else
        {
            $('.rFixedBox').css({'position':'static', 'top':0});   
        }	
       /* return true;*/
    });
SyntaxHighlighter.autoloader(
	'applescript			/jslib/syntaxhighlighter/scripts/shBrushAppleScript.js',
	'actionscript3 as3		/jslib/syntaxhighlighter/scripts/shBrushAS3.js',
	'bash shell				/jslib/syntaxhighlighter/scripts/shBrushBash.js',
	'coldfusion cf			/jslib/syntaxhighlighter/scripts/shBrushColdFusion.js',
	'cpp c					/jslib/syntaxhighlighter/scripts/shBrushCpp.js',
	'obj-c objc				/jslib/syntaxhighlighter/scripts/shBrushObjC.js',
	'c# c-sharp csharp		/jslib/syntaxhighlighter/scripts/shBrushCSharp.js',
	'css					/jslib/syntaxhighlighter/scripts/shBrushCss.js',
	'delphi pascal			/jslib/syntaxhighlighter/scripts/shBrushDelphi.js',
	'diff patch pas			/jslib/syntaxhighlighter/scripts/shBrushDiff.js',
	'erl erlang				/jslib/syntaxhighlighter/scripts/shBrushErlang.js',
	'groovy					/jslib/syntaxhighlighter/scripts/shBrushGroovy.js',
	'haxe hx				/jslib/syntaxhighlighter/scripts/shBrushHaxe.js',
	'java					/jslib/syntaxhighlighter/scripts/shBrushJava.js',
	'jfx javafx				/jslib/syntaxhighlighter/scripts/shBrushJavaFX.js',
	'js jscript javascript	/jslib/syntaxhighlighter/scripts/shBrushJScript.js',
	'perl pl				/jslib/syntaxhighlighter/scripts/shBrushPerl.js',
	'php					/jslib/syntaxhighlighter/scripts/shBrushPhp.js',
	'text plain				/jslib/syntaxhighlighter/scripts/shBrushPlain.js',
	'py python				/jslib/syntaxhighlighter/scripts/shBrushPython.js',
	'ruby rails ror rb		/jslib/syntaxhighlighter/scripts/shBrushRuby.js',
	'scala					/jslib/syntaxhighlighter/scripts/shBrushScala.js',
	'sql					/jslib/syntaxhighlighter/scripts/shBrushSql.js',
	'vb vbnet				/jslib/syntaxhighlighter/scripts/shBrushVb.js',
	'ps powershell			/jslib/syntaxhighlighter/scripts/shBrushPowerShell.js',
	'xml xhtml xslt html	/jslib/syntaxhighlighter/scripts/shBrushXml.js'
);
SyntaxHighlighter.all();
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script type="text/javascript" src='http://img.jb51.net/js/jbLoader.js'></script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<script>jbLoader();</script><script class="closetag">jbLoader(true);</script>
<div id="tongji">
<script type="text/javascript" src="http://img.jb51.net/inc/tongji.js"></script>
<script>
(function(){
var appid = 'cyrHH3dwi',
conf = 'prod_1dc5dc80970106099d43fe242b7465fc';
var doc = document,
s = doc.createElement('script'),
h = doc.getElementsByTagName('head')[0] || doc.head || doc.documentElement;
s.type = 'text/javascript';
s.charset = 'utf-8';
s.src =  'http://assets.changyan.sohu.com/upload/changyan.js?conf='+ conf +'&appid=' + appid;
h.insertBefore(s,h.firstChild);
window.SCS_NO_IFRAME = true;
})();
</script>
</div>
<script type="text/javascript" src="http://www.jb51.net/pl.asp?id=72527"></script>
<script type="text/javascript" charset="utf-8" src="http://changyan.itc.cn/js/??lib/jquery.js,changyan.labs.js?appid=cyrEjJlIw"></script>
</body>
</html>
<!-- published at 2016-8-24 9:50:28By dxycms qq:461478385  -->
